<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2014-05-14 
 | Rendered using Apache Maven Fluido Skin 1.3.1
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20140514" />
    <meta http-equiv="Content-Language" content="en" />
    <title>splitlog: Watching Your Logs - Splitlog User Guide</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.3.1.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

      
    <script type="text/javascript" src="../js/apache-maven-fluido-1.3.1.min.js"></script>

    
                  </head>
        <body class="topBarDisabled">
          
    
    
            
    
        
    <a href="http://github.com/triceo/splitlog">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>splitlog: watching your logs</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2014-05-14
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 1.6.0-RC2
                      </li>
                      
                
                    
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Usage</li>
                              
      <li>
  
                          <a href="../user_guide/introduction.html" title="Introduction">
          <i class="none"></i>
        Introduction</a>
            </li>
                                                                                                
      <li>
  
                          <a href="../user_guide/features.html" title="Features">
          <i class="icon-chevron-down"></i>
        Features</a>
                    <ul class="nav nav-list">
                    
      <li>
  
                          <a href="../user_guide/metrics.html" title="Metrics">
          <i class="none"></i>
        Metrics</a>
            </li>
                    
      <li>
  
                          <a href="../user_guide/merging.html" title="Merging Followers">
          <i class="none"></i>
        Merging Followers</a>
            </li>
                    
      <li>
  
                          <a href="../user_guide/expectations.html" title="Expectations">
          <i class="none"></i>
        Expectations</a>
            </li>
              </ul>
        </li>
                                                                                                          
      <li>
  
                          <a href="../user_guide/advanced.html" title="Deep Down">
          <i class="icon-chevron-down"></i>
        Deep Down</a>
                    <ul class="nav nav-list">
                    
      <li class="active">
  
            <a href="#"><i class="none"></i>Message Lifecycle</a>
          </li>
                    
      <li>
  
                          <a href="../user_guide/splitting.html" title="Splitting">
          <i class="none"></i>
        Splitting</a>
            </li>
                    
      <li>
  
                          <a href="../user_guide/memory.html" title="Memory Management">
          <i class="none"></i>
        Memory Management</a>
            </li>
              </ul>
        </li>
                
      <li>
  
                          <a href="../faq.html" title="Frequently Asked Questions">
          <i class="none"></i>
        Frequently Asked Questions</a>
            </li>
                                        <li class="nav-header">Modules</li>
                              
      <li>
  
                          <a href="../splitlog-api/index.html" title="splitlog-api: the public APIs">
          <i class="none"></i>
        splitlog-api: the public APIs</a>
            </li>
                
      <li>
  
                          <a href="../splitlog-core/index.html" title="splitlog-core: the client library">
          <i class="none"></i>
        splitlog-core: the client library</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                                                                                                                                              
      <li>
  
                          <a href="../project-info.html" title="Project Information">
          <i class="icon-chevron-right"></i>
        Project Information</a>
                  </li>
                                                                                                                                                                                                                  
      <li>
  
                          <a href="../project-reports.html" title="Project Reports">
          <i class="icon-chevron-right"></i>
        Project Reports</a>
                  </li>
            </ul>
                
                    
                            <form id="search-form" action="http://www.google.com/search" method="get" >
    
  <input value="$sitesearchValue" name="sitesearch" type="hidden"/>
  <input class="search-query" name="q" id="query" type="text" />
</form>
<script type="text/javascript" src="http://www.google.com/coop/cse/brand?form=search-form"></script>
          
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <div class="section">
<h2>Splitlog User Guide<a name="Splitlog_User_Guide"></a></h2>
<div class="section">
<h3>Advanced <i>Splitlog</i> Concepts: Message Lifecycle<a name="Advanced_Splitlog_Concepts:_Message_Lifecycle"></a></h3>
<div class="section">
<h4>Message Delivery Status<a name="Message_Delivery_Status"></a></h4>
<p>Throughout their lifetime, messages will transition between different states. </p>

<dl>
<dt><tt>INCOMING</tt></dt>
<dd>When a line is first read from the watched file, it is converted into a <tt>Message</tt>. And since each message can span multiple lines, we cannot decide whether a particular line is the last line of the message. Therefore, before we receive the first line of a new message, the current one will be in the <tt>INCOMING</tt> state.</dd>
<dt><tt>ACCEPTED</tt></dt>
<dd>When we have received first line of the new message, the previous one is now finally over and it can transition into <tt>ACCEPTED</tt> or <tt>REJECTED</tt> state. The message will only become <tt>REJECTED</tt> if the <tt>LogWatch</tt> is configured to reject it through <tt>LogWatchBuilder</tt>. Otherwise, it will be <tt>ACCEPTED</tt> and stored for future retrieval.</dd>
<dt><tt>UNDELIVERED</tt></dt>
<dd>This state is special. The transition from <tt>INCOMING</tt> to <tt>UNDELIVERED</tt> will only happen when a <tt>Follower</tt> is terminated that is currently processing an <tt>INCOMING</tt> message. Only this one <tt>Follower</tt> will receive this message with this state.</dd>
</dl>
<p>This has some noteworthy consequences:</p>

<ul>
  
<li>Messages that are <tt>REJECTED</tt>, <tt>INCOMING</tt> or <tt>UNDELIVERED</tt> will not be stored. All message consumers will, however, be notified of them.</li>
  
<li><tt>Follower</tt>s, as well as their expectations and metrics, will be notified of every messages in any state. However, their <tt>write()</tt> and <tt>getMessages()</tt> methods will only ever work with messages that have been stored.</li>
  
<li>Unless a line appears in the log that starts a new <tt>Message</tt>, the previous one will never reach <tt>ACCEPTED</tt> state. The latest <tt>Message</tt> in the log will therefore always be <tt>INCOMING</tt>. This is an unfortunate consequence of <i>Splitlog</i> not being able to predict the future.</li>
  
<li>More on this can be found in the chapter about <a href="splitting.html">splitting</a>.</li>
</ul></div>
<div class="section">
<h4>Consumers and producers<a name="Consumers_and_producers"></a></h4>
<p><b>Message producer</b> has the capability of notifying a <b>message consumer</b> of <tt>Message</tt>s. Producers and consumers form a tree, where a consumer of one producer may itself be a producer for other consumers. Users are allowed to register their own custom consumers.</p>
<p><tt>LogWatch</tt> is the ultimate producer, the root of the tree. <tt>Follower</tt> serves as its consumer and as a producer for its metrics or merged followers. Merged follower consumes a <tt>Follower</tt> and may pass <tt>Message</tt>s to its own metrics. However, metrics and expectations are the leaves of this tree.</p>
<p>Consumers can be stopped, after which they will refuse any new message from their producers and they will not pass them on to consumers of their own. In practice, when you stop a <tt>Follower</tt>, no more expectations will ever return and no metrics will ever trigger.</p>
<p>Whether or not a producer notifies its consumers of the <tt>Message</tt>s that it has been notified of, that is left to the discretion of the producer. By default, however, no producer provided by the <i>Splitlog</i> package will ever swallow a message.</p></div>
<div class="section">
<h4>Gating<a name="Gating"></a></h4>
<p>Before a <tt>Message</tt> enters <i>Splitlog</i>, it needs to &#x201c;pass through the gate.&#x201d; Messages that don&#x2019;t pass will not be stored, will never be assigned any of the states, and no consumer will ever be notified of their arrival. It would be as if they never existed.</p>
<p>Gating can be configured on the <tt>LogWatchBuilder</tt> and is the very first thing that happens when a line is read from the watched log.</p>
<div class="section">
<h5>References<a name="References"></a></h5>

<ol style="list-style-type: decimal">
  
<li><a href="../apidocs/com/github/triceo/splitlog/api/MessageDeliveryStatus.html">MessageDeliveryStatus Javadoc</a>.</li>
  
<li><a href="../apidocs/com/github/triceo/splitlog/api/MessageProducer.html">MessageProducer Javadoc</a>.</li>
  
<li><a href="../apidocs/com/github/triceo/splitlog/api/MessageConsumer.html">MessageConsumer Javadoc</a>.</li>
  
<li><a href="../apidocs/com/github/triceo/splitlog/api/LogWatchBuilder.html">LogWatchBuilder Javadoc</a>.</li>
</ol>
<p>&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;-</p></div>
<div class="section">
<h5>Something wrong?<a name="Something_wrong"></a></h5>
<p>Think you spotted a mistake in this document? A typo? Factual inaccuracy? <a class="externalLink" href="https://github.com/triceo/splitlog/edit/master/src/site/markdown/user_guide/message_lifecycle.md.vm">Make an edit</a>. Think of the legions of grateful users!</p></div></div></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                        <p class="pull-right">Copyright &copy;                   2014.
          All rights reserved.      
                    
      </p>
        </div>

        
        
          
    
    
                
    <div id="ohloh" class="pull-right">
      <script type="text/javascript" src="http://www.ohloh.net/p/715136/widgets/project_factoids.js"></script>
    </div>
        </div>
    </footer>
        </body>
</html>
